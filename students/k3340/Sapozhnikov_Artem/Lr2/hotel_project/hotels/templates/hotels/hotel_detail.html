{% extends 'base.html' %}
{% block content %}
<div class="title-container">
  <h2 class="section-title">‚ú®{{ hotel.name }}</h2>
</div>
<div class="title-container">
  <p class="third_title">{{ hotel.description }}</p>
</div>
<h3 class="mt-4">–ù–æ–º–µ—Ä–∞:</h3>

<div class="row">
  {% for room in rooms %}
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <h5 class="card-title">{{ room.name }}</h5>
          <p class="card-text">
            –¢–∏–ø: {{ room.room_type }}<br>
            –¶–µ–Ω–∞: {{ room.price }} ‚ÇΩ / –Ω–æ—á—å
          </p>

          <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è -->
          <button class="btn btn-outline-secondary toggle-details"
                  data-room-id="{{ room.id }}">
            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
          </button>

          {% if user.is_authenticated %}
            <a href="{% url 'hotels:booking_create' room.id %}" class="btn btn-primary">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
          {% else %}
            <a href="{% url 'login' %}" class="btn btn-primary">–í–æ–π—Ç–∏, —á—Ç–æ–±—ã –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
          {% endif %}
          <a href="{% url 'hotels:room_review' room.id %}" class="btn btn-outline-secondary toggle-details">
              üí¨ –û—Ç–∑—ã–≤—ã –≥–æ—Å—Ç–µ–π
          </a>
        </div>

        <!-- –°–∫—Ä—ã—Ç–∞—è —á–∞—Å—Ç—å —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ -->
        <div class="card-footer bg-light p-3 room-details" id="details-{{ room.id }}" style="display:none;">
          <p><strong>–£–¥–æ–±—Å—Ç–≤–∞:</strong>
            {% if room.amenities.exists %}
              <ul>
                {% for amenity in room.amenities.all %}
                  <li>{{ amenity.name }}</li>
                {% endfor %}
              </ul>
            {% else %}
              –ù–µ—Ç —É–¥–æ–±—Å—Ç–≤
            {% endif %}
          </p>
          <button class="btn btn-sm btn-link hide-details" data-room-id="{{ room.id }}">–°–∫—Ä—ã—Ç—å</button>
        </div>
      </div>
    </div>
  {% empty %}
    <p>–í —ç—Ç–æ–º –æ—Ç–µ–ª–µ –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤.</p>
  {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.toggle-details').forEach(btn => {
    btn.addEventListener('click', function() {
      const roomId = this.dataset.roomId;
      const details = document.getElementById(`details-${roomId}`);
      details.style.display = 'block';
      this.style.display = 'none';
    });
  });

  document.querySelectorAll('.hide-details').forEach(btn => {
    btn.addEventListener('click', function() {
      const roomId = this.dataset.roomId;
      const details = document.getElementById(`details-${roomId}`);
      const toggleBtn = document.querySelector(`.toggle-details[data-room-id="${roomId}"]`);
      details.style.display = 'none';
      toggleBtn.style.display = 'inline-block';
    });
  });
});
</script>

{% endblock %}
